

--------질문--------------------------------------------------------
질문 제목 :  

 2차원 배열을 함수에 인자로 넘길떄 왜 포인터연산의타입을 알려줘야하나요?

 

질문 요약 :   

2차원 배열의 각요소를 더해서 합을 반환하는 함수를 만들려고하는데     c언어 기본서에서 보면

2차원 배열을 함수로 넘길때 (*arr)[3]으로 포인터행연산시 증가하는 값 3을 지정하는, 이런 형태의 포인터 타입지정해줘야한다고 하더군요..  그저 공부를 하다가 궁금한 것이  2차원 배열은 엄연히 보면 더블포인터 인데 

함수로 받을 인자를  (int** arr, ...   왜 이런식으로 안될까요?

 

2차원배열과 함수에서 참조와 관련해서 자세한 설명부탁드려요^^

 

 

질문 내용 :   

 

#include <stdio.h>
#include <string.h>

int sum1(int (*arr)[2],int high,int len);
int sum2(int (*arr)[3],int high,int len);
int main(void)
{
 int arr1[2][2]={1,3,5,7};
 int arr2[2][3]={1,2,3,4,5,6};

 printf("1,3,5,7의 합:%d\n",sum1(arr1,2,2));
 printf("1,2,3,4,5,6의 합:%d",sum2(arr2,2,3));
 

 return 0;
}


int sum1(int (*arr)[2],int high,int len)
{
 int i=0,j,val=0;

 for(i=0;i<high;i++){
  for(j=0;j<len;j++){
  val+=arr[i][j];
  }
 }
  
 return val;
}

int sum2(int (*arr)[3],int high,int len)
{
 int i=0,j,val=0;

 for(i=0;i<high;i++){
  for(j=0;j<len;j++){
  val+=arr[i][j];
  }
 }
  
 return val;
}



[출처] 2차원 배열을 함수에 인자로 넘길떄 왜 포인터연산의타입을 알려줘야하나요? (C언어를 배우자) |작성자 수학동자


-----답변1-----------------------------------------------

이차원 배열 a[행][열] 을 매개변수로 넘겨줄 때는

 a[행][열]==a[][열]==(*a)[열] 이런식으로 넘겨주어야 하는데 왜냐하면.

이차원 배열은 행을 단위로 저장되고, 포인터연산때문에 그렇습니다.

이차원 배열은 행을 단위로 저장됩니다. 

근데 열 갯수를 모른다면 행이 어떻게 구분되는지 모르게 되죠. 

 

간단히 생각해서... 더블포인터만 넘겨준다면

 시작주소는 아는데 {1,2,3,4,5,6,7,8,9,0} 이 배열이 몇행 몇열인지 알길이 없겠죠? 

 그래서 최소한 열을 써줘야 하는 겁니다. 행갯수는 열갯수 알면 자동으로 나오는거니까요.

----답변2------------------------------------------------

2차원 배열에서 뒤에 있는 괄호는 자료형을 나타냅니다.

 

int arr[2][3]; 으로 정의되었다면,

 

자료형은 int[3] , 즉 정수 3 개 묶음이고

arr 은 int[3]의 배열, 즉, 정수 3 개 묶음이 2 개인 배열인 것이죠.

 

int[3]        arr[2]

 

int (*p)[3] 은 int[3] 에 대한 포인터 변수이구요. arr을 저장하기 딱 맞죠.

 

일차원 배열 int A[5] 의 A를 포인터 변수에 저장하려면 int *pA = A; 하듯이

이차원 배열 int arr[2][3] 의 arr을 포인터 변수에 저장하려면 

 

int [3]        *pa = arr 

==>

int (*pa)[3] = arr;

 

포인터의 포인터 변수를 사용하려면 다음과 같은 경우에 사용되겠죠.

 

int *P[3];

int *Q;

int **pp;

 

pp = P;

pp = &Q;

 

배열명이 포인터 상수로 처리될 뿐이지 배열이 포인터는 아닙니다. 즉,

 

int A[5]; 

 

라고 정의되고

 

int *p = A;

 

로 쓸 수 있다고 해서 

 

A 가 int * 형은 아닙니다. A 는 엄연히 int[5] 배열입니다.

sizeof(A) 가 sizeof(int *) 와 같지는 않잖아요?

sizeof(A) 는 sizeof(int[5]) 와 같습니다.

[출처] 2차원 배열을 함수에 인자로 넘길떄 왜 포인터연산의타입을 알려줘야하나요? (C언어를 배우자) |작성자 광주C

